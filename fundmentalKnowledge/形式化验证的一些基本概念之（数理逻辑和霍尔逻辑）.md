# 形式化验证的一些基本概念之（数理逻辑和霍尔逻辑）

标签（空格分隔）： Formal Methods

---

##数理逻辑
又称为符号逻辑，
数理逻辑是数学的一个分支，其研究对象是对证明和计算这两个直观概念进行符号化以后的形式系统。数理逻辑是数学基础的一个不可缺少的组成部分。

数理逻辑的主要分支包括：模型论、证明论、递归论和公理化集合论。数理逻辑和计算机科学有许多重合之处，这是因为许多计算机科学的先驱者既是数学家、又是逻辑学家，如阿兰·图灵、邱奇等。

程序语言学、语义学的研究从模型论衍生而来，而程序验证中的模型检测则从模型论衍生而来。

##谓词逻辑
数理逻辑中，谓词逻辑（Predicate logic）是符号形式系统的通用术语，比如一阶逻辑，二阶逻辑，多类逻辑或无穷逻辑等等。

##一阶逻辑
不像命题逻辑只处理简单的陈述命题，一阶逻辑还额外包含了断言和量化。

断言像是一个会传回真或伪的函数。考虑下列句子：“苏格拉底是哲学家”、“柏拉图是哲学家”。在命题逻辑里，上述两句被视为两个不相关的命题，简单标记为p及q。然而，在一阶逻辑里，上述两句可以使用断言以更相似的方法来表示。其断言为Phil(a)，表示a是哲学家。因此，若a代表苏格拉底，则Phil(a)为第一个命题－p；若a代表柏拉图，则Phil(a)为第二个命题－q。一阶逻辑的一个关键要点在此可见：字串“Phil”为一个语法实体，以当a为哲学家时陈述Phil(a)为真来赋与其语义。一个语义的赋与称为解释。

一阶逻辑允许以使用变数的方法推论被许多元件共享的性质。

“对于每个a，若a为哲学家，则a为学者”之类形式的断言，需要同时使用变数及量化。再次，令Phil(a)表示a为哲学家，且令Schol(a)表示a为一学者，则一阶叙述

\forall a ( \text{Phil}(a) \to \text{Schol}(a))
表示不论a代表什么，若a为哲学家，则a为学者。此处的\forall（全称量化）代表宣称对“所有”a的选择，括弧内的叙述皆为真的想法。

总结：就是包括这样的VxP(X)这个就是一阶逻辑。

##二阶逻辑
在逻辑和数学中，二阶逻辑是一阶逻辑的扩展，一阶逻辑是命题逻辑的扩展。二阶逻辑接着被高阶逻辑和类型论所扩展。

一阶逻辑和二阶逻辑都使用了论域（有时叫做“域”或“全集”）的想法。论域是可以在其上量化的个体元素的集合。一阶逻辑只包括取值为论域的个体元素的变量和量词。例如在一阶句子∀x(x ≠ x + 1)中变量x被用来表示一个任意的个体。二阶逻辑扩展了一阶逻辑，通过增加取值在个体的集合上变量和量词。例如，二阶句子\forall S \forall x \Big( x \in S \vee x \notin S \Big) 声称对于所有个体的集合S和所有的个体x，要么x在S中要么不在（这是二值原理）。最一般的二阶逻辑还包括量化在函数上的变量，和在下面语法章节解说的变量。

##霍尔逻辑
霍尔逻辑的中心特征是霍尔三元组（Hoare triple）。这种三元组描述一段代码的执行如何改变计算的状态。Hoare三元组有如下形式

\{P\}\;C\;\{Q\}
这里的P和Q是断言而C是命令。P叫做前条件而Q叫做后条件。断言是谓词逻辑的公式。这个三元组在直觉上读做:只要P在C执行前的状态下成立，则在执行之后Q也成立。注意如果C不终止，也就没有"之后"了，所以Q在根本上可以是任何语句。实际上，你可以选择Q为假来表达C不终止。

事实上，这种情形叫做"部分正确(partial correctness）"。如果C终止并且在终止时Q是真，则表达式被称作"全部正确（total correctness）"。终止必须被单独证明。

霍尔逻辑为简单的命令式编程语言的所有构造提供了公理和推理规则。除了给Hoare论文中的简单语言的规则，其他语言构造的规则也已经被Hoare和很多其他研究者开发完成。包括并发、过程、goto语句，和指针。

- 空语句公理[编辑]
 \frac{}{\{P\}\ \textbf{skip}\ \{P\}} \!
如果P在一个空语句之前成立，那么在执行这个空语句之后也是成立的。 "skip"在这里表示空语句（Empty statement）。

- 赋值公理模式[编辑]
赋值公理声称，关于对赋值右手端的变量的以前为真的任何命题在赋值之后仍然成立:

- While规则[编辑]
\frac { \{P \wedge B \}\ S\ \{P\} }
              { \{P \}\ \textbf{while}\ B\ \textbf{do}\ S\ \textbf{done}\ \{\neg B \wedge P\} }
\!
这里的P是循环不变条件，这就是循环不变式

注意区分部分正确和完全正确，完全正确就是确保C会终止

##柯里-霍华德同构
柯里-霍华德对应是在计算机程序和数学证明之间的紧密联系；这种对应也叫做柯里-霍华德同构、公式为类型对应或命题为类型对应。这是对形式逻辑系统和公式计算（computational calculus）之间符号的相似性的推广。

对应可以在两个层面上看到，首先是类比层次，它声称对一个函数计算出的值的类型的断言可类比于一个逻辑定理，计算这个值的程序可类比于这个定理的证明。在理论计算机科学中，这是连接λ演算和类型论的毗邻领域的一个重要的底层原理。它被经常以下列形式陈述为“证明是程序”。一个可选择的形式化为“命题为类型”。其次，更加正式的，它指定了在两个数学领域之间的同构，就是以一种特定方式形式化的自然演绎和简单类型λ演算之间是双射，首先是证明和项，其次是证明归约步骤和beta归约。

有多种方式考虑柯里-霍华德对应。在一个方向上，它工作于“把证明编译为程序”级别上。这里的“证明”最初被限定为在构造性逻辑中—典型的是直觉逻辑系统中的证明。而“程序”是在常规的函数式编程的意义上的；从语法的观点上看，这种程序是用某种λ演算表达的。所以柯里-霍华德同构的具体实现是详细研究如何把来自直觉逻辑的证明写成λ项。（这是霍华德的贡献；柯里贡献了组合子，它是相对于是高级语言的λ演算是能写所有东西的机器语言）。最近，同样处理经典逻辑的柯里-霍华德对应的扩展可被公式化了，通过对经典有效规则比如双重否定除去和皮尔士定律关联上明确的用续体比如call/cc处理的一类项。


##后记

###直觉逻辑
直觉主义逻辑或构造性逻辑是最初由阿兰德·海廷开发的为鲁伊兹·布劳威尔的数学直觉主义计划提供形式基础的符号逻辑。这个系统保持跨越生成导出命题的变换的证实性而不是真理性。从实用的观点，也有使用直觉逻辑的强烈动机，因为它有存在性质，这使它还适合其他形式的数学构造主义。

这个系统保持跨越生成导出命题的变换的证实性而不是真理性

不支持排中律，但支持无矛盾律。

###经典逻辑
经典逻辑（英语：Classical logic），又称古典逻辑，标识已经被最深入的研究和最广泛的使用的一类形式逻辑，也被称为标准逻辑（standard logic）。它们被特征化为一些性质；非经典逻辑缺乏一个或多个这种特性，它们是：

- 排中律
- 无矛盾律
- 蕴涵的单调性和蕴涵的幂等律（分别就是结构规则中弱化规则和紧缩规则）
- 合取的交换律
- 德·摩根对偶律：所有逻辑算子都对偶于另一个

###排中律
在逻辑中，排中律(拉丁语tertium non datur)声称对于任何命题 P，(P ∨ ¬P) 为真。

这不完全同于二值原理，它陈述的是 P 必须要么是真要么是假。它也不同于无矛盾律，它陈述的是 ¬(P ∧ ¬P) 是真。

排中律只是说 (P ∨ ¬P) 整体是真。不提及 P 自身可以采用什么真值。在任何情况下，任何二值逻辑的语义都将为 P 和 ¬P 指派对立的真值(就是说，如果 P 是真，则 ¬P 是假)，所以在二值逻辑中排中律会等价于二值原理。但是，对于非二值逻辑或多值逻辑就不能这么说。
特定的逻辑系统可能通过允许多于两个真值(比如：真、假、中；真、假、非真非假、亦真亦假)而拒绝二值原理，但接受排中律。在这种逻辑中，(P ∨ ¬P) 可以为真，而 P 和 ¬P 不被分别指派为对立的真值。

例子：
p:路口是红灯
非P:路口不是红灯。。。只能推到这里，不能推到是绿灯。 不过可以推到是绿灯或者蓝灯

一些逻辑不接受排中律，最著名的是直觉逻辑。文章《二值和有关规律》中详细地讨论了这个问题。
排中律可能被误用，导致排中律的逻辑谬论，这也叫做假两难推理

###假两难推理
又称非黑即白（black-or-white）、伪（假）二分法、伪二择（选）一法、伪两面法、双刀法等，是提出少数选项（一般是两个，但有可能是三个或更多）要人从中择一，但这些选择并未涵盖所有的可能性。

非黑即白是基于对排中律的误用。排中律只适合衡量非此即彼的二元观念（例如“对与错”、“真与假”等等），用于其他范畴未必恰当。要破解此类谬误，可证明除了论证中提出的选项外，还有其他可能。
有时假两难是被刻意提出以迫使他人做出选择的，但其他时候它是因不小心忽略其他可能性而成，而非蓄意造成的。

例一
你不要整天只想着吃！
都不吃的话，我饿死怎么办？
说明：“整天吃”和“不吃”只是两个极端，中间还有适度进食的可能。

例二
如果爱情是坚定的，无论怎样冲击也不会变；
如果爱情不坚定，没有冲击也会变。
说明：“坚定”与“不坚定”只是两个极端，但中间还有不同的坚定程度，越坚定的爱情，越不容易受冲击而改变。

在心理学上，与假两难相关的现象被称作“非黑即白”（black-and-white thinking）。许多人惯常地使用非黑即白的思考模式，其中一个例子便是某个将其他人给贴上“全好”或“全坏”的标签的人

像“你要不就是跟我们一伙的，要不就是与我等为敌的”（You're either with us, or against us）这类的讲法在某些情况下亦会被视为假两难或非黑即白的二分法之一例。

###二值原理
在逻辑中，二值原理（英语：Principle of bivalence）是指，对于任何命题 P，只能有一个真值：命题P只能是真，或假，其中之一。满足这个原则的逻辑推论，称为二值逻辑（英语：two-valued logic，bivalent logic）。

[1] 在经典逻辑中，二值原理等价于说没有命题非真非假。非真非假的命题 P 是不可判定的。
[2] 在直觉逻辑中，命题 P 的真值有时不能判定(就是说 P 不能被证明或反驳)。在这种情况下，P 简单的不能有真值。其他逻辑，比如多值逻辑，可以指派给 P 一个中间的真值。

不要混淆于排中律和无矛盾律。

###我有一个疑问
为什么直觉逻辑不支持排中律
多值逻辑里面有个说法，它的值不可判定。

直觉逻辑是比经典逻辑弱的系统。经典逻辑把自身关注于在抽象的、柏拉图主义意义上为真的公式，而直觉逻辑只在可以为它构造一个证明的时候认为公式为真。公式α ∨ ¬α示例了这种区别；它是经典逻辑的一个定理而不是直觉逻辑的定理。尽管它是经典的真的，在直觉逻辑中这个公式断言了我们要么证明α要么证明¬α。因为我们不是总能做到这些事情之一，它不是直觉逻辑的一个定理。

在直觉逻辑中，证明中的在认识论上不清晰的步骤是禁止。在经典逻辑中，公式 A 断言 A 是真。在直觉逻辑中这个公式只在可被"证明"的情况下才被当作是真。作为这种区别的例子，考虑经典逻辑所接受的排中律，直觉逻辑不接受这条定律，因为在允许这种公式的语言中，有可能从 P ∨ ¬P 得出结论，而不需要知道这个析取中哪个是真的。在效果上，在直觉逻辑中，P ∨ ¬P 说明至少 P 或 ¬P 中的一个可以被证明，这比说它们的析取是真要强壮。
　　
背后的想法是精神构造的有效性依赖于它与它的上下文(知觉)的一致。出于这种看法，认识论上的不透明性，在效果上是欺骗。
直觉逻辑在它的逻辑演算中用证实性替代了真实性。逻辑演算跨越生成导出命题的变换保持证实性，而不是真实性。