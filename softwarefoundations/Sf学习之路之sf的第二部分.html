<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Sf学习之路之sf的第二部分</title>
</head>
<body>
<div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_SVG_Hidden"></div><svg><defs id="MathJax_SVG_glyphs"><path id="MJMAIN-7B" stroke-width="1" d="M434 -231Q434 -244 428 -250H410Q281 -250 230 -184Q225 -177 222 -172T217 -161T213 -148T211 -133T210 -111T209 -84T209 -47T209 0Q209 21 209 53Q208 142 204 153Q203 154 203 155Q189 191 153 211T82 231Q71 231 68 234T65 250T68 266T82 269Q116 269 152 289T203 345Q208 356 208 377T209 529V579Q209 634 215 656T244 698Q270 724 324 740Q361 748 377 749Q379 749 390 749T408 750H428Q434 744 434 732Q434 719 431 716Q429 713 415 713Q362 710 332 689T296 647Q291 634 291 499V417Q291 370 288 353T271 314Q240 271 184 255L170 250L184 245Q202 239 220 230T262 196T290 137Q291 131 291 1Q291 -134 296 -147Q306 -174 339 -192T415 -213Q429 -213 431 -216Q434 -219 434 -231Z"></path><path id="MJMATHI-50" stroke-width="1" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path><path id="MJMAIN-7D" stroke-width="1" d="M65 731Q65 745 68 747T88 750Q171 750 216 725T279 670Q288 649 289 635T291 501Q292 362 293 357Q306 312 345 291T417 269Q428 269 431 266T434 250T431 234T417 231Q380 231 345 210T298 157Q293 143 292 121T291 -28V-79Q291 -134 285 -156T256 -198Q202 -250 89 -250Q71 -250 68 -247T65 -230Q65 -224 65 -223T66 -218T69 -214T77 -213Q91 -213 108 -210T146 -200T183 -177T207 -139Q208 -134 209 3L210 139Q223 196 280 230Q315 247 330 250Q305 257 280 270Q225 304 212 352L210 362L209 498Q208 635 207 640Q195 680 154 696T77 713Q68 713 67 716T65 731Z"></path><path id="MJMAIN-20" stroke-width="1"></path><path id="MJMAINB-73" stroke-width="1" d="M38 315Q38 339 45 360T70 404T127 440T223 453Q273 453 320 436L338 445L357 453H366Q380 453 383 447T386 403V387V355Q386 331 383 326T365 321H355H349Q333 321 329 324T324 341Q317 406 224 406H216Q123 406 123 353Q123 334 143 321T188 304T244 294T285 286Q305 281 325 273T373 237T412 172Q414 162 414 142Q414 -6 230 -6Q154 -6 117 22L68 -6H58Q44 -6 41 0T38 42V73Q38 85 38 101T37 122Q37 144 42 148T68 153H75Q87 153 91 151T97 147T103 132Q131 46 220 46H230Q257 46 265 47Q330 58 330 108Q330 127 316 142Q300 156 284 162Q271 168 212 178T122 202Q38 243 38 315Z"></path><path id="MJMAINB-6B" stroke-width="1" d="M32 686L123 690Q214 694 215 694H221V255L377 382H346V444H355Q370 441 476 441Q544 441 556 444H562V382H476L347 277L515 62H587V0H579Q564 3 476 3Q370 3 352 0H343V62H358L373 63L260 206L237 189L216 172V62H285V0H277Q259 3 157 3Q46 3 37 0H29V62H98V332Q98 387 98 453T99 534Q99 593 97 605T83 620Q69 624 42 624H29V686H32Z"></path><path id="MJMAINB-69" stroke-width="1" d="M72 610Q72 649 98 672T159 695Q193 693 217 670T241 610Q241 572 217 549T157 525Q120 525 96 548T72 610ZM46 442L136 446L226 450H232V62H294V0H286Q271 3 171 3Q67 3 49 0H40V62H109V209Q109 358 108 362Q103 380 55 380H43V442H46Z"></path><path id="MJMAINB-70" stroke-width="1" d="M32 442L123 446Q214 450 215 450H221V409Q222 409 229 413T251 423T284 436T328 446T382 450Q480 450 540 388T600 223Q600 128 539 61T361 -6H354Q292 -6 236 28L227 34V-132H296V-194H287Q269 -191 163 -191Q56 -191 38 -194H29V-132H98V113V284Q98 330 97 348T93 370T83 376Q69 380 42 380H29V442H32ZM457 224Q457 303 427 349T350 395Q282 395 235 352L227 345V104L233 97Q274 45 337 45Q383 45 420 86T457 224Z"></path><path id="MJMAIN-5B" stroke-width="1" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path><path id="MJMATHI-45" stroke-width="1" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"></path><path id="MJMAIN-2F" stroke-width="1" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path><path id="MJMATHI-78" stroke-width="1" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path><path id="MJMAIN-5D" stroke-width="1" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path><path id="MJMAIN-3A" stroke-width="1" d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJMAIN-3D" stroke-width="1" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJMATHI-53" stroke-width="1" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path><path id="MJMATHI-51" stroke-width="1" d="M399 -80Q399 -47 400 -30T402 -11V-7L387 -11Q341 -22 303 -22Q208 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435Q740 255 592 107Q529 47 461 16L444 8V3Q444 2 449 -24T470 -66T516 -82Q551 -82 583 -60T625 -3Q631 11 638 11Q647 11 649 2Q649 -6 639 -34T611 -100T557 -165T481 -194Q399 -194 399 -87V-80ZM636 468Q636 523 621 564T580 625T530 655T477 665Q429 665 379 640Q277 591 215 464T153 216Q153 110 207 59Q231 38 236 38V46Q236 86 269 120T347 155Q372 155 390 144T417 114T429 82T435 55L448 64Q512 108 557 185T619 334T636 468ZM314 18Q362 18 404 39L403 49Q399 104 366 115Q354 117 347 117Q344 117 341 117T337 118Q317 118 296 98T274 52Q274 18 314 18Z"></path><path id="MJMAIN-2C" stroke-width="1" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path><path id="MJMATHI-54" stroke-width="1" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path><path id="MJMATHI-52" stroke-width="1" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path><path id="MJMAIN-3B" stroke-width="1" d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 85 94 103T137 121Q202 121 202 8Q202 -44 183 -94T144 -169T118 -194Q115 -194 106 -186T95 -174Q94 -171 107 -155T137 -107T160 -38Q161 -32 162 -22T165 -4T165 4Q165 5 161 4T142 0Q110 0 94 18T78 60Z"></path><path id="MJMATHI-42" stroke-width="1" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path><path id="MJMAIN-2227" stroke-width="1" d="M318 591Q325 598 333 598Q344 598 348 591Q349 590 414 445T545 151T611 -4Q609 -22 591 -22Q588 -22 586 -21T581 -20T577 -17T575 -13T572 -9T570 -4L333 528L96 -4Q87 -20 80 -21Q78 -22 75 -22Q57 -22 55 -4Q55 2 120 150T251 444T318 591Z"></path><path id="MJMAIN-AC" stroke-width="1" d="M56 323T56 336T70 356H596Q603 353 611 343V102Q598 89 591 89Q587 89 584 90T579 94T575 98T572 102L571 209V316H70Q56 323 56 336Z"></path><path id="MJMAINB-66" stroke-width="1" d="M308 0Q290 3 172 3Q58 3 49 0H40V62H109V382H42V444H109V503L110 562L112 572Q127 625 178 658T316 699Q318 699 330 699T348 700Q381 698 404 687T436 658T449 629T452 606Q452 576 432 557T383 537Q355 537 335 555T314 605Q314 635 328 649H325Q311 649 293 644T253 618T227 560Q226 555 226 498V444H340V382H232V62H318V0H308Z"></path><path id="MJMAINB-74" stroke-width="1" d="M272 49Q320 49 320 136V145V177H382V143Q382 106 380 99Q374 62 349 36T285 -2L272 -5H247Q173 -5 134 27Q109 46 102 74T94 160Q94 171 94 199T95 245V382H21V433H25Q58 433 90 456Q121 479 140 523T162 621V635H224V444H363V382H224V239V207V149Q224 98 228 81T249 55Q261 49 272 49Z"></path><path id="MJMAINB-68" stroke-width="1" d="M40 686L131 690Q222 694 223 694H229V533L230 372L238 381Q248 394 264 407T317 435T398 450Q428 450 448 447T491 434T529 402T551 346Q553 335 554 198V62H623V0H614Q596 3 489 3Q374 3 365 0H356V62H425V194V275Q425 348 416 373T371 399Q326 399 288 370T238 290Q236 281 235 171V62H304V0H295Q277 3 171 3Q64 3 46 0H37V62H106V332Q106 387 106 453T107 534Q107 593 105 605T91 620Q77 624 50 624H37V686H40Z"></path><path id="MJMAINB-65" stroke-width="1" d="M32 225Q32 332 102 392T272 452H283Q382 452 436 401Q494 343 494 243Q494 226 486 222T440 217Q431 217 394 217T327 218H175V209Q175 177 179 154T196 107T236 69T306 50Q312 49 323 49Q376 49 410 85Q421 99 427 111T434 127T442 133T463 135H468Q494 135 494 117Q494 110 489 97T468 66T431 32T373 5T292 -6Q181 -6 107 55T32 225ZM383 276Q377 346 348 374T280 402Q253 402 230 390T195 357Q179 331 176 279V266H383V276Z"></path><path id="MJMAINB-6E" stroke-width="1" d="M40 442Q217 450 218 450H224V407L225 365Q233 378 245 391T289 422T362 448Q374 450 398 450Q428 450 448 447T491 434T529 402T551 346Q553 335 554 198V62H623V0H614Q596 3 489 3Q374 3 365 0H356V62H425V194V275Q425 348 416 373T371 399Q326 399 288 370T238 290Q236 281 235 171V62H304V0H295Q277 3 171 3Q64 3 46 0H37V62H106V210V303Q106 353 104 363T91 376Q77 380 50 380H37V442H40Z"></path><path id="MJMAINB-6C" stroke-width="1" d="M43 686L134 690Q225 694 226 694H232V62H301V0H292Q274 3 170 3Q67 3 49 0H40V62H109V332Q109 387 109 453T110 534Q110 593 108 605T94 620Q80 624 53 624H40V686H43Z"></path><path id="MJMAINB-64" stroke-width="1" d="M351 686L442 690Q533 694 534 694H540V389Q540 327 540 253T539 163Q539 97 541 83T555 66Q569 62 596 62H609V31Q609 0 608 0Q588 0 510 -3T412 -6Q411 -6 411 16V38L401 31Q337 -6 265 -6Q159 -6 99 58T38 224Q38 265 51 303T92 375T165 429T272 449Q359 449 417 412V507V555Q417 597 415 607T402 620Q388 624 361 624H348V686H351ZM411 350Q362 399 291 399Q278 399 256 392T218 371Q195 351 189 320T182 238V221Q182 179 183 159T191 115T212 74Q241 46 288 46Q358 46 404 100L411 109V350Z"></path><path id="MJMAINB-77" stroke-width="1" d="M624 444Q636 441 722 441Q797 441 800 444H805V382H741L593 11Q592 10 590 8T586 4T584 2T581 0T579 -2T575 -3T571 -3T567 -4T561 -4T553 -4H542Q525 -4 518 6T490 70Q474 110 463 137L415 257L367 137Q357 111 341 72Q320 17 313 7T289 -4H277Q259 -4 253 -2T238 11L90 382H25V444H32Q47 441 140 441Q243 441 261 444H270V382H222L310 164L382 342L366 382H303V444H310Q322 441 407 441Q508 441 523 444H531V382H506Q481 382 481 380Q482 376 529 259T577 142L674 382H617V444H624Z"></path><path id="MJMAINB-6F" stroke-width="1" d="M287 -5Q228 -5 182 10T109 48T63 102T39 161T32 219Q32 272 50 314T94 382T154 423T214 446T265 452H279Q319 452 326 451Q428 439 485 376T542 221Q542 156 514 108T442 33Q384 -5 287 -5ZM399 230V250Q399 280 398 298T391 338T372 372T338 392T282 401Q241 401 212 380Q190 363 183 334T175 230Q175 202 175 189T177 153T183 118T195 91T215 68T245 56T287 50Q348 50 374 84Q388 101 393 132T399 230Z"></path><path id="MJMAIN-2032" stroke-width="1" d="M79 43Q73 43 52 49T30 61Q30 68 85 293T146 528Q161 560 198 560Q218 560 240 545T262 501Q262 496 260 486Q259 479 173 263T84 45T79 43Z"></path><path id="MJMAIN-2192" stroke-width="1" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></defs></svg></div><div id="wmd-preview" class="wmd-preview"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="db3z" id="sf学习之路之sf的第二部分">Sf学习之路之sf的第二部分</h1><p data-anchor-id="ovtt"><code class="code-black">未分类</code></p><hr><p data-anchor-id="tsnh">根据roadmap，我目前已经学习到了：</p><p data-anchor-id="wjmx">一,Hoare.v</p><p data-anchor-id="jtoq">Idea: create a domain specific logic for reasoning about properties of Imp programs. <br>
This hides the low-level details of the semantics of the program <br>
Leads to a compositional reasoning process <br>
The basic structure is given by Hoare triples of the form: <br>
  {{P}} c {{Q}} <br>
P and Q are properties about the state of the Imp program <br>
"If command c is started in a state satisfying assertion P, and if c eventually terminates in some final state, then this final state will satisfy the assertion Q."</p><p data-anchor-id="x845">Sometimes the preconditions and postconditions we get from the Hoare rules won't quite be the ones we want in the particular situation at hand — they may be logically equivalent but have a different syntactic form that fails to unify with the goal we are trying to prove, or they actually may be logically weaker (for preconditions) or stronger (for postconditions) than what we need.</p><p data-anchor-id="pck9">Hoare Logic Rules (so far):</p><p data-anchor-id="81ho">二.Hoare2 <br>
1） <br>
修饰程序（Decorated Programs）：让程序自带证明，来非形式化地说明程序的正确性。 <br>
p{S}q:霍尔三元组，表示每当对于程序段的输入p为真时，就有q为真。</p><p data-anchor-id="iuu9">空语句公理:<span class="MathJax_Preview"></span><div class="MathJax_SVG_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 -696.443555896202 6267 1683.7831894623068" style="width: 14.563ex; height: 3.961ex; vertical-align: -2.33ex; margin: 1px 0px;"><g stroke="black" fill="black" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(120,0)"><rect stroke="none" width="6147" height="60" x="0" y="220"></rect><g transform="translate(60,-717)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-50" x="500" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="1252" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="1752" y="0"></use><g transform="translate(2003,0)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-73"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-6B" x="454" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-69" x="1062" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-70" x="1381" y="0"></use></g><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="4024" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B" x="4274" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-50" x="4775" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="5526" y="0"></use></g></g></g></svg></span></div><script type="math/tex; mode=display" id="MathJax-Element-1">   \frac{}{\{P\}\ \textbf{skip}\ \{P\}} \! </script></p><p data-anchor-id="53w1">赋值公理： <br>
<span class="MathJax_Preview"></span><div class="MathJax_SVG_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 -696.443555896202 9590.055555555555 1683.7831894623068" style="width: 22.252ex; height: 3.961ex; vertical-align: -2.33ex; margin: 1px 0px;"><g stroke="black" fill="black" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(120,0)"><rect stroke="none" width="9470" height="60" x="0" y="220"></rect><g transform="translate(60,-717)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-50" x="500" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-5B" x="1252" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-45" x="1530" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-2F" x="2295" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-78" x="2795" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-5D" x="3368" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="3646" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="4147" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-78" x="4397" y="0"></use><g transform="translate(5247,0)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-3A"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-3D" x="278" y="0"></use></g><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-45" x="6582" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="7347" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B" x="7597" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-50" x="8098" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="8849" y="0"></use></g></g></g></svg></span></div><script type="math/tex; mode=display" id="MathJax-Element-2">  \frac{}{\{P[E/x]\}\ x:=E \ \{P\} } \! </script> <br>
{P[e/x]}x := e {P} <br>
这里的P[E/x]指示表达式P中变量x的所有自由出现都被替代为表达式E <br>
例子： <br>
{x+1=43  x=42} y:=x + 1 {y=43  x=42}</p><p data-anchor-id="tr4h">顺序规则：<span class="MathJax_Preview"></span><div class="MathJax_SVG_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-3-Frame" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 -1487.339633566105 10636.166666666668 2474.67926713221" style="width: 24.699ex; height: 5.709ex; vertical-align: -2.33ex; margin: 1px 0px;"><g stroke="black" fill="black" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(120,0)"><rect stroke="none" width="10516" height="60" x="0" y="220"></rect><g transform="translate(60,716)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-50" x="500" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="1252" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="1752" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-53" x="2003" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="2648" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B" x="2899" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-51" x="3399" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="4191" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="4691" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-2C" x="4942" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="5387" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B" x="5637" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-51" x="6138" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="6929" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="7430" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-54" x="7680" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="8385" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B" x="8635" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-52" x="9136" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="9895" y="0"></use></g><g transform="translate(2353,-717)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-50" x="500" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="1252" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="1752" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-53" x="2003" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-3B" x="2648" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-54" x="3093" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="3798" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B" x="4048" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-52" x="4549" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="5308" y="0"></use></g></g></g></svg></span></div><script type="math/tex; mode=display" id="MathJax-Element-3">  \frac {\{P\}\ S\ \{Q\}\ , \ \{Q\}\ T\ \{R\} } {\{P\}\ S;T\ \{R\}} \! </script> <br>
条件规则：<span class="MathJax_Preview"></span><div class="MathJax_SVG_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-4-Frame" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 -1487.339633566105 15130 2474.67926713221" style="width: 35.184ex; height: 5.709ex; vertical-align: -2.33ex; margin: 1px 0px;"><g stroke="black" fill="black" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(120,0)"><rect stroke="none" width="15010" height="60" x="0" y="220"></rect><g transform="translate(105,716)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-42" x="500" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-2227" x="1482" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-50" x="2371" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="3123" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="3623" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-53" x="3874" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="4519" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B" x="4770" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-51" x="5270" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="6062" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="6562" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-2C" x="6813" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="7258" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B" x="7509" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-AC" x="8009" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-42" x="8677" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-2227" x="9658" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-50" x="10548" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="11300" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="11800" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-54" x="12051" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="12755" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B" x="13006" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-51" x="13506" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="14298" y="0"></use></g><g transform="translate(60,-717)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-50" x="500" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="1252" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="1752" y="0"></use><g transform="translate(2003,0)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-69"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-66" x="319" y="0"></use></g><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="2674" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-42" x="2924" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="3684" y="0"></use><g transform="translate(3934,0)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-74"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-68" x="447" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-65" x="1087" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-6E" x="1614" y="0"></use></g><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="6188" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-53" x="6439" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="7084" y="0"></use><g transform="translate(7335,0)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-65"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-6C" x="527" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-73" x="847" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-65" x="1301" y="0"></use></g><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="9164" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-54" x="9414" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="10119" y="0"></use><g transform="translate(10369,0)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-65"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-6E" x="527" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-64" x="1167" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-69" x="1806" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-66" x="2126" y="0"></use></g><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="12847" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B" x="13097" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-51" x="13598" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="14389" y="0"></use></g></g></g></svg></span></div><script type="math/tex; mode=display" id="MathJax-Element-4"> \frac { \{B \wedge P\}\ S\ \{Q\}\ ,\ \{\neg B \wedge P \}\ T\ \{Q\} }
              { \{P\}\ \textbf{if}\ B\ \textbf{then}\ S\ \textbf{else}\ T\ \textbf{endif}\ \{Q\} } \! </script> <br>
while规则:</p><div class="md-section-divider"></div><p data-anchor-id="j37d"><span class="MathJax_Preview"></span><div class="MathJax_SVG_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-5-Frame" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 -1487.339633566105 15426.444444444445 2474.67926713221" style="width: 35.883ex; height: 5.709ex; vertical-align: -2.33ex; margin: 1px 0px;"><g stroke="black" fill="black" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(120,0)"><rect stroke="none" width="15306" height="60" x="0" y="220"></rect><g transform="translate(4391,716)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-50" x="500" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-2227" x="1474" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-42" x="2363" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="3123" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="3623" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-53" x="3874" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="4519" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B" x="4770" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-50" x="5270" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="6022" y="0"></use></g><g transform="translate(60,-717)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-50" x="500" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="1252" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="1752" y="0"></use><g transform="translate(2003,0)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-77"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-68" x="831" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-69" x="1471" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-6C" x="1790" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-65" x="2110" y="0"></use></g><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="4640" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-42" x="4891" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="5650" y="0"></use><g transform="translate(5901,0)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-64"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-6F" x="639" y="0"></use></g><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="7116" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-53" x="7366" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="8012" y="0"></use><g transform="translate(8262,0)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-64"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-6F" x="639" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-6E" x="1215" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAINB-65" x="1854" y="0"></use></g><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="10644" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B" x="10895" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-AC" x="11395" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-42" x="12063" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-2227" x="13044" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-50" x="13934" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="14685" y="0"></use></g></g></g></svg></span></div><script type="math/tex; mode=display" id="MathJax-Element-5"> \frac { \{P \wedge B \}\ S\ \{P\} }
              { \{P \}\ \textbf{while}\ B\ \textbf{do}\ S\ \textbf{done}\ \{\neg B \wedge P\} }
\!  </script></p><p data-anchor-id="ke1c">推论规则：<span class="MathJax_Preview"></span><div class="MathJax_SVG_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-6-Frame" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 -1495.9185378117581 14145.310280878231 2483.258171377863" style="width: 32.854ex; height: 5.825ex; vertical-align: -2.33ex; margin: 1px 0px;"><g stroke="black" fill="black" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(120,0)"><rect stroke="none" width="14025" height="60" x="0" y="220"></rect><g transform="translate(60,716)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-50"></use><use transform="scale(0.7071067811865476)" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-2032" x="1109" y="513"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-2192" x="1356" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="2635" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-50" x="2885" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="3637" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-2C" x="3887" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="4332" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B" x="4583" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-50" x="5083" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="5835" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="6335" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-53" x="6586" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="7231" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B" x="7482" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-51" x="7982" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="8774" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="9274" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-2C" x="9525" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="9970" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-51" x="10220" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-2192" x="11290" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="12568" y="0"></use><g transform="translate(12819,0)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-51"></use><use transform="scale(0.7071067811865476)" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-2032" x="1119" y="513"></use></g></g><g transform="translate(4230,-717)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B"></use><g transform="translate(500,0)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-50"></use><use transform="scale(0.7071067811865476)" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-2032" x="1109" y="408"></use></g><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="1579" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="1830" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="2330" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-53" x="2581" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-20" x="3226" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7B" x="3477" y="0"></use><g transform="translate(3977,0)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMATHI-51"></use><use transform="scale(0.7071067811865476)" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-2032" x="1119" y="408"></use></g><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#MJMAIN-7D" x="5063" y="0"></use></g></g></g></svg></span></div><script type="math/tex; mode=display" id="MathJax-Element-6"> 
\frac {  P^\prime \rightarrow\ P\ ,\ \lbrace P \rbrace\ S\ \lbrace Q \rbrace\ ,\ Q \rightarrow\ Q^\prime }
{ \lbrace  P^\prime\ \rbrace\ S\ \lbrace Q^\prime\rbrace }
\!
 </script></p><p data-anchor-id="p0nc">2）目标：we explain in detail how to construct decorations for several simple programs that don't involve non-trivial loop invariants. <br>
1.下面给出几个例子，给程序的每一步写出specifications。 <br>
复制语句序列</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="17ke"><ol class="linenums"><li class="L0"><code><span class="pln"> X </span><span class="pun">::=</span><span class="pln"> X </span><span class="pun">+</span><span class="pln"> Y</span><span class="pun">;;</span></code></li><li class="L1"><code><span class="pln"> Y </span><span class="pun">::=</span><span class="pln"> X </span><span class="pun">-</span><span class="pln"> Y</span><span class="pun">;;</span></code></li><li class="L2"><code><span class="pln"> X </span><span class="pun">::=</span><span class="pln"> X </span><span class="pun">-</span><span class="pln"> Y</span><span class="pun">;;</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln">     </span><span class="pun">{{</span><span class="pln"> X </span><span class="pun">=</span><span class="pln"> m </span><span class="pun">∧</span><span class="pln"> Y </span><span class="pun">=</span><span class="pln"> n </span><span class="pun">}}</span><span class="pln"> </span><span class="pun">⇾</span></code></li><li class="L5"><code><span class="pln"> </span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln">     </span><span class="pun">{{</span><span class="pln"> </span><span class="pun">(</span><span class="pln">X </span><span class="pun">+</span><span class="pln"> Y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="pun">((</span><span class="pln">X </span><span class="pun">+</span><span class="pln"> Y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> Y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> n </span><span class="pun">∧</span><span class="pln"> </span><span class="pun">(</span><span class="pln">X </span><span class="pun">+</span><span class="pln"> Y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> Y </span><span class="pun">=</span><span class="pln"> m </span><span class="pun">}}</span></code></li><li class="L6"><code><span class="pln">        X </span><span class="pun">::=</span><span class="pln"> X </span><span class="pun">+</span><span class="pln"> Y</span><span class="pun">;;</span></code></li><li class="L7"><code><span class="pln"> </span><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span><span class="pln">     </span><span class="pun">{{</span><span class="pln"> X </span><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="pln">X </span><span class="pun">-</span><span class="pln"> Y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> n </span><span class="pun">∧</span><span class="pln"> X </span><span class="pun">-</span><span class="pln"> Y </span><span class="pun">=</span><span class="pln"> m </span><span class="pun">}}</span></code></li><li class="L8"><code><span class="pln">        Y </span><span class="pun">::=</span><span class="pln"> X </span><span class="pun">-</span><span class="pln"> Y</span><span class="pun">;;</span></code></li><li class="L9"><code><span class="pln"> </span><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span><span class="pln">     </span><span class="pun">{{</span><span class="pln"> X </span><span class="pun">-</span><span class="pln"> Y </span><span class="pun">=</span><span class="pln"> n </span><span class="pun">∧</span><span class="pln"> Y </span><span class="pun">=</span><span class="pln"> m </span><span class="pun">}}</span></code></li><li class="L0"><code><span class="pln">        X </span><span class="pun">::=</span><span class="pln"> X </span><span class="pun">-</span><span class="pln"> Y</span></code></li><li class="L1"><code><span class="pln"> </span><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span><span class="pln">     </span><span class="pun">{{</span><span class="pln"> X </span><span class="pun">=</span><span class="pln"> n </span><span class="pun">∧</span><span class="pln"> Y </span><span class="pun">=</span><span class="pln"> m </span><span class="pun">}}</span></code></li></ol></pre><p data-anchor-id="wnje">明白了，直接替换就好了。</p><p data-anchor-id="cluq">2. <br>
条件语句序列：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="uumr"><ol class="linenums"><li class="L0"><code><span class="kwd">if</span><span class="pln"> x </span><span class="pun">&lt;</span><span class="pln"> y </span><span class="kwd">then</span></code></li><li class="L1"><code><span class="pln">    z</span><span class="pun">=</span><span class="pln">y</span><span class="pun">-</span><span class="pln">x</span></code></li><li class="L2"><code><span class="kwd">else</span></code></li><li class="L3"><code><span class="pln">    z</span><span class="pun">=</span><span class="pln">x</span><span class="pun">-</span><span class="pln">y</span></code></li><li class="L4"><code><span class="kwd">fi</span></code></li><li class="L5"><code><span class="typ">We</span><span class="pln"> start </span><span class="kwd">with</span><span class="pln"> the outer precondition </span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> postcondition </span><span class="pun">(</span><span class="lit">8</span><span class="pun">).</span></code></li><li class="L6"><code></code></li><li class="L7"><code><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln">     </span><span class="pun">{{</span><span class="kwd">True</span><span class="pun">}}</span></code></li><li class="L8"><code><span class="pln">       IFB X </span><span class="pun">≤</span><span class="pln"> Y THEN</span></code></li><li class="L9"><code><span class="pln"> </span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln">       </span><span class="pun">{{</span><span class="kwd">True</span><span class="pln"> </span><span class="pun">∧</span><span class="pln"> X </span><span class="pun">≤</span><span class="pln"> Y</span><span class="pun">}}</span><span class="pln"> </span><span class="pun">⇾</span></code></li><li class="L0"><code><span class="pln"> </span><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span><span class="pln">       </span><span class="pun">{{(</span><span class="pln">Y </span><span class="pun">-</span><span class="pln"> X</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> X </span><span class="pun">=</span><span class="pln"> Y </span><span class="pun">∨</span><span class="pln"> </span><span class="pun">(</span><span class="pln">Y </span><span class="pun">-</span><span class="pln"> X</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> Y </span><span class="pun">=</span><span class="pln"> X</span><span class="pun">}}</span></code></li><li class="L1"><code><span class="pln">         Z </span><span class="pun">::=</span><span class="pln"> Y </span><span class="pun">-</span><span class="pln"> X</span></code></li><li class="L2"><code><span class="pln"> </span><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span><span class="pln">       </span><span class="pun">{{</span><span class="pln">Z </span><span class="pun">+</span><span class="pln"> X </span><span class="pun">=</span><span class="pln"> Y </span><span class="pun">∨</span><span class="pln"> Z </span><span class="pun">+</span><span class="pln"> Y </span><span class="pun">=</span><span class="pln"> X</span><span class="pun">}}</span></code></li><li class="L3"><code><span class="pln">       ELSE</span></code></li><li class="L4"><code><span class="pln"> </span><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span><span class="pln">       </span><span class="pun">{{</span><span class="kwd">True</span><span class="pln"> </span><span class="pun">∧</span><span class="pln"> </span><span class="pun">~(</span><span class="pln">X </span><span class="pun">≤</span><span class="pln"> Y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}}</span><span class="pln"> </span><span class="pun">⇾</span></code></li><li class="L5"><code><span class="pln"> </span><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span><span class="pln">       </span><span class="pun">{{(</span><span class="pln">X </span><span class="pun">-</span><span class="pln"> Y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> X </span><span class="pun">=</span><span class="pln"> Y </span><span class="pun">∨</span><span class="pln"> </span><span class="pun">(</span><span class="pln">X </span><span class="pun">-</span><span class="pln"> Y</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> Y </span><span class="pun">=</span><span class="pln"> X</span><span class="pun">}}</span></code></li><li class="L6"><code><span class="pln">         Z </span><span class="pun">::=</span><span class="pln"> X </span><span class="pun">-</span><span class="pln"> Y</span></code></li><li class="L7"><code><span class="pln"> </span><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span><span class="pln">       </span><span class="pun">{{</span><span class="pln">Z </span><span class="pun">+</span><span class="pln"> X </span><span class="pun">=</span><span class="pln"> Y </span><span class="pun">∨</span><span class="pln"> Z </span><span class="pun">+</span><span class="pln"> Y </span><span class="pun">=</span><span class="pln"> X</span><span class="pun">}}</span></code></li><li class="L8"><code><span class="pln">       FI</span></code></li><li class="L9"><code><span class="pln"> </span><span class="pun">(</span><span class="lit">8</span><span class="pun">)</span><span class="pln">     </span><span class="pun">{{</span><span class="pln">Z </span><span class="pun">+</span><span class="pln"> X </span><span class="pun">=</span><span class="pln"> Y </span><span class="pun">∨</span><span class="pln"> Z </span><span class="pun">+</span><span class="pln"> Y </span><span class="pun">=</span><span class="pln"> X</span><span class="pun">}}</span></code></li></ol></pre><p data-anchor-id="gis7">3. <br>
while语句序列：Trivial loop语句</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="nqo4"><ol class="linenums"><li class="L0"><code><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln">    </span><span class="pun">{{</span><span class="pln"> </span><span class="kwd">True</span><span class="pln"> </span><span class="pun">}}</span><span class="pln"> </span><span class="pun">⇾</span></code></li><li class="L1"><code><span class="pln"> </span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln">    </span><span class="pun">{{</span><span class="pln"> n </span><span class="pun">×</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> m </span><span class="pun">=</span><span class="pln"> m </span><span class="pun">}}</span></code></li><li class="L2"><code><span class="pln">      X </span><span class="pun">::=</span><span class="pln"> m</span><span class="pun">;;</span></code></li><li class="L3"><code><span class="pln"> </span><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span><span class="pln">    </span><span class="pun">{{</span><span class="pln"> n </span><span class="pun">×</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> X </span><span class="pun">=</span><span class="pln"> m </span><span class="pun">}}</span></code></li><li class="L4"><code><span class="pln">      Y </span><span class="pun">::=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;;</span></code></li><li class="L5"><code><span class="pln"> </span><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span><span class="pln">    </span><span class="pun">{{</span><span class="pln"> n </span><span class="pun">×</span><span class="pln"> Y </span><span class="pun">+</span><span class="pln"> X </span><span class="pun">=</span><span class="pln"> m </span><span class="pun">}}</span></code></li><li class="L6"><code><span class="pln">      WHILE n </span><span class="pun">≤</span><span class="pln"> X DO</span></code></li><li class="L7"><code><span class="pln"> </span><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span><span class="pln">      </span><span class="pun">{{</span><span class="pln"> n </span><span class="pun">×</span><span class="pln"> Y </span><span class="pun">+</span><span class="pln"> X </span><span class="pun">=</span><span class="pln"> m </span><span class="pun">∧</span><span class="pln"> n </span><span class="pun">≤</span><span class="pln"> X </span><span class="pun">}}</span><span class="pln"> </span><span class="pun">⇾</span></code></li><li class="L8"><code><span class="pln"> </span><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span><span class="pln">      </span><span class="pun">{{</span><span class="pln"> n </span><span class="pun">×</span><span class="pln"> </span><span class="pun">(</span><span class="pln">Y </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="pln">X </span><span class="pun">-</span><span class="pln"> n</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> m </span><span class="pun">}}</span></code></li><li class="L9"><code><span class="pln">        X </span><span class="pun">::=</span><span class="pln"> X </span><span class="pun">-</span><span class="pln"> n</span><span class="pun">;;</span></code></li><li class="L0"><code><span class="pln"> </span><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span><span class="pln">      </span><span class="pun">{{</span><span class="pln"> n </span><span class="pun">×</span><span class="pln"> </span><span class="pun">(</span><span class="pln">Y </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> X </span><span class="pun">=</span><span class="pln"> m </span><span class="pun">}}</span></code></li><li class="L1"><code><span class="pln">        Y </span><span class="pun">::=</span><span class="pln"> Y </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span></code></li><li class="L2"><code><span class="pln"> </span><span class="pun">(</span><span class="lit">8</span><span class="pun">)</span><span class="pln">      </span><span class="pun">{{</span><span class="pln"> n </span><span class="pun">×</span><span class="pln"> Y </span><span class="pun">+</span><span class="pln"> X </span><span class="pun">=</span><span class="pln"> m </span><span class="pun">}}</span></code></li><li class="L3"><code><span class="pln">      </span><span class="kwd">END</span></code></li><li class="L4"><code><span class="pln"> </span><span class="pun">(</span><span class="lit">9</span><span class="pun">)</span><span class="pln">    </span><span class="pun">{{</span><span class="pln"> n </span><span class="pun">×</span><span class="pln"> Y </span><span class="pun">+</span><span class="pln"> X </span><span class="pun">=</span><span class="pln"> m </span><span class="pun">∧</span><span class="pln"> X </span><span class="pun">&lt;</span><span class="pln"> n </span><span class="pun">}}</span></code></li></ol></pre><p data-anchor-id="eiqz">4.Finding Loop Invariants <br>
Once the outermost precondition and postcondition are chosen, the only creative part in verifying programs with Hoare Logic is finding the right loop invariants. The reason this is difficult is the same as the reason that doing inductive mathematical proofs requires creativity: strengthening the loop invariant (or the induction hypothesis) means that you have a stronger assumption to work with when trying to establish the postcondition of the loop body (complete the induction step of the proof), but it also means that the loop body postcondition itself is harder to prove!</p><p data-anchor-id="zoxt">下面教导你如何去找循环不变式： <br>
Example: Slow Subtraction(缓慢减少方法)</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="r3r1"><ol class="linenums"><li class="L0"><code><span class="pln"> </span><span class="pun">{{</span><span class="pln"> X </span><span class="pun">=</span><span class="pln"> m </span><span class="pun">∧</span><span class="pln"> Y </span><span class="pun">=</span><span class="pln"> n </span><span class="pun">}}</span></code></li><li class="L1"><code><span class="pln">           WHILE X </span><span class="pun">≠</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> DO</span></code></li><li class="L2"><code><span class="pln">             Y </span><span class="pun">::=</span><span class="pln"> Y </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;;</span></code></li><li class="L3"><code><span class="pln">             X </span><span class="pun">::=</span><span class="pln"> X </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span></code></li><li class="L4"><code><span class="pln">           </span><span class="kwd">END</span></code></li><li class="L5"><code><span class="pln">             </span><span class="pun">{{</span><span class="pln"> Y </span><span class="pun">=</span><span class="pln"> n </span><span class="pun">-</span><span class="pln"> m </span><span class="pun">}}</span></code></li></ol></pre><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="opz2"><ol class="linenums"><li class="L0"><code><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln">      </span><span class="pun">{{</span><span class="pln"> X </span><span class="pun">=</span><span class="pln"> m </span><span class="pun">∧</span><span class="pln"> Y </span><span class="pun">=</span><span class="pln"> n </span><span class="pun">}}</span><span class="pln">  </span><span class="pun">⇾</span><span class="pln">     </span><span class="pun">(</span><span class="pln">a</span><span class="pun">)</span></code></li><li class="L1"><code><span class="pln">    </span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln">      </span><span class="pun">{{</span><span class="pln"> I </span><span class="pun">}}</span></code></li><li class="L2"><code><span class="pln">           WHILE X </span><span class="pun">≠</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> DO</span></code></li><li class="L3"><code><span class="pln">    </span><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span><span class="pln">        </span><span class="pun">{{</span><span class="pln"> I </span><span class="pun">∧</span><span class="pln"> X </span><span class="pun">≠</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">}}</span><span class="pln">  </span><span class="pun">⇾</span><span class="pln">      </span><span class="pun">(</span><span class="pln">c</span><span class="pun">)</span></code></li><li class="L4"><code><span class="pln">    </span><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span><span class="pln">        </span><span class="pun">{{</span><span class="pln"> I</span><span class="pun">[</span><span class="pln">X </span><span class="pun">↦</span><span class="pln"> X</span><span class="pun">-</span><span class="lit">1</span><span class="pun">][</span><span class="pln">Y </span><span class="pun">↦</span><span class="pln"> Y</span><span class="pun">-</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">}}</span></code></li><li class="L5"><code><span class="pln">             Y </span><span class="pun">::=</span><span class="pln"> Y </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;;</span></code></li><li class="L6"><code><span class="pln">    </span><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span><span class="pln">        </span><span class="pun">{{</span><span class="pln"> I</span><span class="pun">[</span><span class="pln">X </span><span class="pun">↦</span><span class="pln"> X</span><span class="pun">-</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">}}</span></code></li><li class="L7"><code><span class="pln">             X </span><span class="pun">::=</span><span class="pln"> X </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span></code></li><li class="L8"><code><span class="pln">    </span><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span><span class="pln">        </span><span class="pun">{{</span><span class="pln"> I </span><span class="pun">}}</span></code></li><li class="L9"><code><span class="pln">           </span><span class="kwd">END</span></code></li><li class="L0"><code><span class="pln">    </span><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span><span class="pln">      </span><span class="pun">{{</span><span class="pln"> I </span><span class="pun">∧</span><span class="pln"> </span><span class="pun">~(</span><span class="pln">X </span><span class="pun">≠</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}}</span><span class="pln">  </span><span class="pun">⇾</span><span class="pln">         </span><span class="pun">(</span><span class="pln">b</span><span class="pun">)</span></code></li><li class="L1"><code><span class="pln">    </span><span class="pun">(</span><span class="lit">8</span><span class="pun">)</span><span class="pln">      </span><span class="pun">{{</span><span class="pln"> Y </span><span class="pun">=</span><span class="pln"> n </span><span class="pun">-</span><span class="pln"> m </span><span class="pun">}}</span></code></li></ol></pre><p data-anchor-id="nw0i">不管猜测，终于找出了循环不变式子：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="w69z"><ol class="linenums"><li class="L0"><code><span class="pln">  </span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln">      </span><span class="pun">{{</span><span class="pln"> X </span><span class="pun">=</span><span class="pln"> m </span><span class="pun">∧</span><span class="pln"> Y </span><span class="pun">=</span><span class="pln"> n </span><span class="pun">}}</span><span class="pln">  </span><span class="pun">⇾</span><span class="pln">               </span><span class="pun">(</span><span class="pln">a </span><span class="pun">-</span><span class="pln"> OK</span><span class="pun">)</span></code></li><li class="L1"><code><span class="pln">    </span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln">      </span><span class="pun">{{</span><span class="pln"> Y </span><span class="pun">-</span><span class="pln"> X </span><span class="pun">=</span><span class="pln"> n </span><span class="pun">-</span><span class="pln"> m </span><span class="pun">}}</span></code></li><li class="L2"><code><span class="pln">           WHILE X </span><span class="pun">≠</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> DO</span></code></li><li class="L3"><code><span class="pln">    </span><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span><span class="pln">        </span><span class="pun">{{</span><span class="pln"> Y </span><span class="pun">-</span><span class="pln"> X </span><span class="pun">=</span><span class="pln"> n </span><span class="pun">-</span><span class="pln"> m </span><span class="pun">∧</span><span class="pln"> X </span><span class="pun">≠</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">}}</span><span class="pln">  </span><span class="pun">⇾</span><span class="pln">    </span><span class="pun">(</span><span class="pln">c </span><span class="pun">-</span><span class="pln"> OK</span><span class="pun">)</span></code></li><li class="L4"><code><span class="pln">    </span><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span><span class="pln">        </span><span class="pun">{{</span><span class="pln"> </span><span class="pun">(</span><span class="pln">Y </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="pln">X </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> n </span><span class="pun">-</span><span class="pln"> m </span><span class="pun">}}</span></code></li><li class="L5"><code><span class="pln">             Y </span><span class="pun">::=</span><span class="pln"> Y </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;;</span></code></li><li class="L6"><code><span class="pln">    </span><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span><span class="pln">        </span><span class="pun">{{</span><span class="pln"> Y </span><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="pln">X </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> n </span><span class="pun">-</span><span class="pln"> m </span><span class="pun">}}</span></code></li><li class="L7"><code><span class="pln">             X </span><span class="pun">::=</span><span class="pln"> X </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span></code></li><li class="L8"><code><span class="pln">    </span><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span><span class="pln">        </span><span class="pun">{{</span><span class="pln"> Y </span><span class="pun">-</span><span class="pln"> X </span><span class="pun">=</span><span class="pln"> n </span><span class="pun">-</span><span class="pln"> m </span><span class="pun">}}</span></code></li><li class="L9"><code><span class="pln">           </span><span class="kwd">END</span></code></li><li class="L0"><code><span class="pln">    </span><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span><span class="pln">      </span><span class="pun">{{</span><span class="pln"> Y </span><span class="pun">-</span><span class="pln"> X </span><span class="pun">=</span><span class="pln"> n </span><span class="pun">-</span><span class="pln"> m </span><span class="pun">∧</span><span class="pln"> X </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">}}</span><span class="pln">  </span><span class="pun">⇾</span><span class="pln">       </span><span class="pun">(</span><span class="pln">b </span><span class="pun">-</span><span class="pln"> OK</span><span class="pun">)</span></code></li><li class="L1"><code><span class="pln">    </span><span class="pun">(</span><span class="lit">8</span><span class="pun">)</span><span class="pln">      </span><span class="pun">{{</span><span class="pln"> Y </span><span class="pun">=</span><span class="pln"> n </span><span class="pun">-</span><span class="pln"> m </span><span class="pun">}}</span></code></li></ol></pre><p data-anchor-id="bdv5">Example: Parity <br>
Example: Finding Square Roots</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="ggca"><ol class="linenums"><li class="L0"><code><span class="pln">      </span><span class="pun">{{</span><span class="pln"> X</span><span class="pun">=</span><span class="pln">m </span><span class="pun">}}</span></code></li><li class="L1"><code><span class="pln">    Z </span><span class="pun">::=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;;</span></code></li><li class="L2"><code><span class="pln">    WHILE </span><span class="pun">(</span><span class="pln">Z</span><span class="pun">+</span><span class="lit">1</span><span class="pun">)*(</span><span class="pln">Z</span><span class="pun">+</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">≤</span><span class="pln"> X DO</span></code></li><li class="L3"><code><span class="pln">      Z </span><span class="pun">::=</span><span class="pln"> Z</span><span class="pun">+</span><span class="lit">1</span></code></li><li class="L4"><code><span class="pln">    </span><span class="kwd">END</span></code></li><li class="L5"><code><span class="pln">      </span><span class="pun">{{</span><span class="pln"> Z</span><span class="pun">×</span><span class="pln">Z</span><span class="pun">≤</span><span class="pln">m </span><span class="pun">∧</span><span class="pln"> m</span><span class="pun">&lt;(</span><span class="pln">Z</span><span class="pun">+</span><span class="lit">1</span><span class="pun">)*(</span><span class="pln">Z</span><span class="pun">+</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}}</span></code></li></ol></pre><p data-anchor-id="kzeb">Very often, if a variable is used in a loop in a read-only fashion (i.e., it is referred to by the program or by the specification and it is not changed by the loop) it is necessary to add the fact that it doesn't change to the loop invariant.</p><p data-anchor-id="d7mu">Weakest Preconditions</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="4hjh"><ol class="linenums"><li class="L0"><code><span class="pun">{{</span><span class="pln"> Y </span><span class="pun">≤</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">}}</span><span class="pln">  X </span><span class="pun">::=</span><span class="pln"> Y </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pln">  </span><span class="pun">{{</span><span class="pln"> X </span><span class="pun">≤</span><span class="pln"> </span><span class="lit">5</span><span class="pln"> </span><span class="pun">}}</span></code></li></ol></pre><p data-anchor-id="yn8n">In other words, Y ≤ 4 is the weakest valid precondition of the command X ::= Y + 1 for the postcondition X ≤ 5.</p><p data-anchor-id="uxhk">In general, we say that "P is the weakest precondition of command c for postcondition Q" if {{P}} c {{Q}} and if, whenever P' is an assertion such that {{P'}} c {{Q}}, we have P' st implies P st for all states st.</p><p data-anchor-id="ohbx">三：Small-setp</p><p data-anchor-id="l5pk">The evaluators we have seen so far (e.g., the ones for aexps, bexps, and commands) have been formulated in a "big-step" style — they specify how a given expression can be evaluated to its final value (or a command plus a store to a final store) "all in one big step."</p><p data-anchor-id="sjyb">But there are some things it does not do well. In particular, it does not give us a natural way of talking about concurrent programming languages, where the "semantics" of a program — i.e., the essence of how it behaves — is not just which input states get mapped to which output states, but also includes the intermediate states that it passes through along the way, since these states can also be observed by concurrently executing code.</p><p data-anchor-id="vfui">A much more natural approach is simply to say that the behavior of an expression like 2+nil is undefined — it doesn't evaluate to any result at all. And we can easily do this: we just have to formulate aeval and beval as Inductive propositions rather than Fixpoints, so that we can make them partial functions instead of total ones.</p><p data-anchor-id="oiib">As a first step, we need a different way of presenting the semantics that allows us to distinguish nontermination from erroneous "stuck states."</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="4hlz"><ol class="linenums"><li class="L0"><code><span class="typ">Inductive</span><span class="pln"> tm </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Type</span><span class="pln"> </span><span class="pun">:=</span></code></li><li class="L1"><code><span class="pln">  </span><span class="pun">|</span><span class="pln"> C </span><span class="pun">:</span><span class="pln"> nat </span><span class="pun">-&gt;</span><span class="pln"> tm         </span><span class="pun">(*</span><span class="pln"> </span><span class="typ">Constant</span><span class="pln"> </span><span class="pun">*)</span></code></li><li class="L2"><code><span class="pln">  </span><span class="pun">|</span><span class="pln"> P </span><span class="pun">:</span><span class="pln"> tm </span><span class="pun">-&gt;</span><span class="pln"> tm </span><span class="pun">-&gt;</span><span class="pln"> tm</span><span class="pun">.</span><span class="pln">   </span><span class="pun">(*</span><span class="pln"> </span><span class="typ">Plus</span><span class="pln"> </span><span class="pun">*)</span></code></li></ol></pre><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="9low"><ol class="linenums"><li class="L0"><code><span class="pun">如果是</span><span class="pln">bigstep</span><span class="pun">，就是这样</span><span class="pln">EVAL</span><span class="pun">的。</span></code></li><li class="L1"><code><span class="pun">一种是定义操作的</span></code></li><li class="L2"><code><span class="typ">Fixpoint</span><span class="pln"> evalF </span><span class="pun">(</span><span class="pln">t </span><span class="pun">:</span><span class="pln"> tm</span><span class="pun">)</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> nat </span><span class="pun">:=</span></code></li><li class="L3"><code><span class="pln">  match t </span><span class="kwd">with</span></code></li><li class="L4"><code><span class="pln">  </span><span class="pun">|</span><span class="pln"> C n </span><span class="pun">=&gt;</span><span class="pln"> n</span></code></li><li class="L5"><code><span class="pln">  </span><span class="pun">|</span><span class="pln"> P a1 a2 </span><span class="pun">=&gt;</span><span class="pln"> evalF a1 </span><span class="pun">+</span><span class="pln"> evalF a2</span></code></li><li class="L6"><code><span class="pln">  </span><span class="kwd">end</span><span class="pun">.</span></code></li><li class="L7"><code></code></li><li class="L8"><code><span class="pun">一种是定义</span><span class="pln">relation</span><span class="pun">的</span></code></li><li class="L9"><code><span class="typ">Inductive</span><span class="pln"> </span><span class="kwd">eval</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> tm </span><span class="pun">-&gt;</span><span class="pln"> nat </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="typ">Prop</span><span class="pln"> </span><span class="pun">:=</span></code></li><li class="L0"><code><span class="pln">  </span><span class="pun">|</span><span class="pln"> E_Const </span><span class="pun">:</span><span class="pln"> forall n</span><span class="pun">,</span></code></li><li class="L1"><code><span class="pln">      C n </span><span class="pun">||</span><span class="pln"> n</span></code></li><li class="L2"><code><span class="pln">  </span><span class="pun">|</span><span class="pln"> E_Plus </span><span class="pun">:</span><span class="pln"> forall t1 t2 n1 n2</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L3"><code><span class="pln">      t1 </span><span class="pun">||</span><span class="pln"> n1 </span><span class="pun">-&gt;</span><span class="pln"> </span></code></li><li class="L4"><code><span class="pln">      t2 </span><span class="pun">||</span><span class="pln"> n2 </span><span class="pun">-&gt;</span></code></li><li class="L5"><code><span class="pln">      P t1 t2 </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">n1 </span><span class="pun">+</span><span class="pln"> n2</span><span class="pun">)</span></code></li><li class="L6"><code></code></li><li class="L7"><code><span class="pln">  </span><span class="kwd">where</span><span class="pln"> </span><span class="str">" t '||' n "</span><span class="pln"> </span><span class="pun">:=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">eval</span><span class="pln"> t n</span><span class="pun">).</span></code></li></ol></pre><p data-anchor-id="ybez">大步语义</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="10ug"><ol class="linenums"><li class="L0"><code><span class="pun">(**</span><span class="pln"> </span></code></li><li class="L1"><code><span class="pln">                               </span><span class="pun">--------</span><span class="pln">                                </span><span class="pun">(</span><span class="pln">E_Const</span><span class="pun">)</span></code></li><li class="L2"><code><span class="pln">                               C n </span><span class="pun">||</span><span class="pln"> n</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="pln">                               t1 </span><span class="pun">||</span><span class="pln"> n1</span></code></li><li class="L5"><code><span class="pln">                               t2 </span><span class="pun">||</span><span class="pln"> n2</span></code></li><li class="L6"><code><span class="pln">                           </span><span class="pun">------------------</span><span class="pln">                          </span><span class="pun">(</span><span class="pln">E_Plus</span><span class="pun">)</span></code></li><li class="L7"><code><span class="pln">                           P t1 t2 </span><span class="pun">||</span><span class="pln"> n1 </span><span class="pun">+</span><span class="pln"> n2</span></code></li><li class="L8"><code><span class="pun">*)</span></code></li></ol></pre><p data-anchor-id="k4r0">小步语义</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="eg2q"><ol class="linenums"><li class="L0"><code><span class="pun">(**</span><span class="pln"> </span><span class="typ">Now</span><span class="pun">,</span><span class="pln"> here </span><span class="kwd">is</span><span class="pln"> a small</span><span class="pun">-</span><span class="pln">step version</span><span class="pun">.</span><span class="pln"> </span><span class="pun">*)</span></code></li><li class="L1"><code><span class="pun">(**</span><span class="pln"> </span></code></li><li class="L2"><code><span class="pln">                     </span><span class="pun">-------------------------------</span><span class="pln">        </span><span class="pun">(</span><span class="pln">ST_PlusConstConst</span><span class="pun">)</span></code></li><li class="L3"><code><span class="pln">                     P </span><span class="pun">(</span><span class="pln">C n1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">(</span><span class="pln">C n2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==&gt;</span><span class="pln"> C </span><span class="pun">(</span><span class="pln">n1 </span><span class="pun">+</span><span class="pln"> n2</span><span class="pun">)</span></code></li><li class="L4"><code></code></li><li class="L5"><code><span class="pln">                              t1 </span><span class="pun">==&gt;</span><span class="pln"> t1</span><span class="str">'</span></code></li><li class="L6"><code><span class="str">                         --------------------                        (ST_Plus1)</span></code></li><li class="L7"><code><span class="str">                         P t1 t2 ==&gt; P t1'</span><span class="pln"> t2</span></code></li><li class="L8"><code></code></li><li class="L9"><code><span class="pln">                              t2 </span><span class="pun">==&gt;</span><span class="pln"> t2</span><span class="str">'</span></code></li><li class="L0"><code><span class="str">                      ---------------------------                    (ST_Plus2)</span></code></li><li class="L1"><code><span class="str">                      P (C n1) t2 ==&gt; P (C n1) t2'</span></code></li><li class="L2"><code><span class="pun">*)</span></code></li></ol></pre><p data-anchor-id="snzi">小步语义的定义</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="fvk1"><ol class="linenums"><li class="L0"><code><span class="typ">Inductive</span><span class="pln"> step </span><span class="pun">:</span><span class="pln"> tm </span><span class="pun">-&gt;</span><span class="pln"> tm </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="typ">Prop</span><span class="pln"> </span><span class="pun">:=</span></code></li><li class="L1"><code><span class="pln">  </span><span class="pun">|</span><span class="pln"> ST_PlusConstConst </span><span class="pun">:</span><span class="pln"> forall n1 n2</span><span class="pun">,</span></code></li><li class="L2"><code><span class="pln">      P </span><span class="pun">(</span><span class="pln">C n1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">(</span><span class="pln">C n2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==&gt;</span><span class="pln"> C </span><span class="pun">(</span><span class="pln">n1 </span><span class="pun">+</span><span class="pln"> n2</span><span class="pun">)</span></code></li><li class="L3"><code><span class="pln">  </span><span class="pun">|</span><span class="pln"> ST_Plus1 </span><span class="pun">:</span><span class="pln"> forall t1 t1</span><span class="str">' t2,</span></code></li><li class="L4"><code><span class="str">      t1 ==&gt; t1'</span><span class="pln"> </span><span class="pun">-&gt;</span></code></li><li class="L5"><code><span class="pln">      P t1 t2 </span><span class="pun">==&gt;</span><span class="pln"> P t1</span><span class="str">' t2</span></code></li><li class="L6"><code><span class="str">  | ST_Plus2 : forall n1 t2 t2'</span><span class="pun">,</span></code></li><li class="L7"><code><span class="pln">      t2 </span><span class="pun">==&gt;</span><span class="pln"> t2</span><span class="str">' -&gt; </span></code></li><li class="L8"><code><span class="str">      P (C n1) t2 ==&gt; P (C n1) t2'</span></code></li><li class="L9"><code></code></li><li class="L0"><code><span class="pln">  </span><span class="kwd">where</span><span class="pln"> </span><span class="str">" t '==&gt;' t' "</span><span class="pln"> </span><span class="pun">:=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">step t t</span><span class="str">').</span></code></li></ol></pre><p data-anchor-id="bb15">一个很好的小步语义的例子来说明这个道理</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="bdj9"><ol class="linenums"><li class="L0"><code><span class="typ">Example</span><span class="pln"> test_step_1 </span><span class="pun">:</span><span class="pln"> </span></code></li><li class="L1"><code><span class="pln">      P </span></code></li><li class="L2"><code><span class="pln">        </span><span class="pun">(</span><span class="pln">P </span><span class="pun">(</span><span class="pln">C </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">(</span><span class="pln">C </span><span class="lit">3</span><span class="pun">))</span></code></li><li class="L3"><code><span class="pln">        </span><span class="pun">(</span><span class="pln">P </span><span class="pun">(</span><span class="pln">C </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">(</span><span class="pln">C </span><span class="lit">4</span><span class="pun">))</span></code></li><li class="L4"><code><span class="pln">      </span><span class="pun">==&gt;</span></code></li><li class="L5"><code><span class="pln">      P </span></code></li><li class="L6"><code><span class="pln">        </span><span class="pun">(</span><span class="pln">C </span><span class="pun">(</span><span class="lit">0</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">3</span><span class="pun">))</span></code></li><li class="L7"><code><span class="pln">        </span><span class="pun">(</span><span class="pln">P </span><span class="pun">(</span><span class="pln">C </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">(</span><span class="pln">C </span><span class="lit">4</span><span class="pun">)).</span></code></li><li class="L8"><code><span class="typ">Proof</span><span class="pun">.</span></code></li><li class="L9"><code><span class="pln">  apply ST_Plus1</span><span class="pun">.</span><span class="pln"> apply ST_PlusConstConst</span><span class="pun">.</span><span class="pln">  </span><span class="typ">Qed</span><span class="pun">.</span></code></li></ol></pre><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="9psw"><ol class="linenums"><li class="L0"><code><span class="typ">Inductive</span><span class="pln"> value </span><span class="pun">:</span><span class="pln"> tm </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="typ">Prop</span><span class="pln"> </span><span class="pun">:=</span></code></li><li class="L1"><code><span class="pln">  v_const </span><span class="pun">:</span><span class="pln"> forall n</span><span class="pun">,</span><span class="pln"> value </span><span class="pun">(</span><span class="pln">C n</span><span class="pun">).</span></code></li><li class="L2"><code><span class="typ">Check</span><span class="pln"> v_const </span><span class="lit">3.</span></code></li></ol></pre><p data-anchor-id="56x1">使用VALUE的优美定义</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="8z4d"><ol class="linenums"><li class="L0"><code><span class="pun">(**</span><span class="pln"> </span><span class="typ">Having</span><span class="pln"> introduced the idea of values</span><span class="pun">,</span><span class="pln"> we can </span><span class="kwd">use</span><span class="pln"> it </span><span class="kwd">in</span><span class="pln"> the</span></code></li><li class="L1"><code><span class="pln">    definition of the </span><span class="pun">[==&gt;]</span><span class="pln"> relation to write </span><span class="pun">[</span><span class="pln">ST_Plus2</span><span class="pun">]</span><span class="pln"> rule </span><span class="kwd">in</span><span class="pln"> a</span></code></li><li class="L2"><code><span class="pln">    slightly more elegant way</span><span class="pun">:</span><span class="pln"> </span><span class="pun">*)</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="pun">(**</span><span class="pln"> </span></code></li><li class="L5"><code><span class="pln">                     </span><span class="pun">-------------------------------</span><span class="pln">        </span><span class="pun">(</span><span class="pln">ST_PlusConstConst</span><span class="pun">)</span></code></li><li class="L6"><code><span class="pln">                     P </span><span class="pun">(</span><span class="pln">C n1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">(</span><span class="pln">C n2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==&gt;</span><span class="pln"> C </span><span class="pun">(</span><span class="pln">n1 </span><span class="pun">+</span><span class="pln"> n2</span><span class="pun">)</span></code></li><li class="L7"><code></code></li><li class="L8"><code><span class="pln">                              t1 </span><span class="pun">==&gt;</span><span class="pln"> t1</span><span class="str">'</span></code></li><li class="L9"><code><span class="str">                         --------------------                        (ST_Plus1)</span></code></li><li class="L0"><code><span class="str">                         P t1 t2 ==&gt; P t1'</span><span class="pln"> t2</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="pln">                               value v1</span></code></li><li class="L3"><code><span class="pln">                              t2 </span><span class="pun">==&gt;</span><span class="pln"> t2</span><span class="str">'</span></code></li><li class="L4"><code><span class="str">                         --------------------                        (ST_Plus2)</span></code></li><li class="L5"><code><span class="str">                         P v1 t2 ==&gt; P v1 t2'</span></code></li><li class="L6"><code><span class="pun">*)</span></code></li></ol></pre><p data-anchor-id="d8rn">这是最新的形式化定义</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="610l"><ol class="linenums"><li class="L0"><code><span class="typ">Inductive</span><span class="pln"> step </span><span class="pun">:</span><span class="pln"> tm </span><span class="pun">-&gt;</span><span class="pln"> tm </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="typ">Prop</span><span class="pln"> </span><span class="pun">:=</span></code></li><li class="L1"><code><span class="pln">  </span><span class="pun">|</span><span class="pln"> ST_PlusConstConst </span><span class="pun">:</span><span class="pln"> forall n1 n2</span><span class="pun">,</span></code></li><li class="L2"><code><span class="pln">          P </span><span class="pun">(</span><span class="pln">C n1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">(</span><span class="pln">C n2</span><span class="pun">)</span></code></li><li class="L3"><code><span class="pln">      </span><span class="pun">==&gt;</span><span class="pln"> C </span><span class="pun">(</span><span class="pln">n1 </span><span class="pun">+</span><span class="pln"> n2</span><span class="pun">)</span></code></li><li class="L4"><code><span class="pln">  </span><span class="pun">|</span><span class="pln"> ST_Plus1 </span><span class="pun">:</span><span class="pln"> forall t1 t1</span><span class="str">' t2,</span></code></li><li class="L5"><code><span class="str">        t1 ==&gt; t1'</span><span class="pln"> </span><span class="pun">-&gt;</span></code></li><li class="L6"><code><span class="pln">        P t1 t2 </span><span class="pun">==&gt;</span><span class="pln"> P t1</span><span class="str">' t2</span></code></li><li class="L7"><code><span class="str">  | ST_Plus2 : forall v1 t2 t2'</span><span class="pun">,</span></code></li><li class="L8"><code><span class="pln">        value v1 </span><span class="pun">-&gt;</span><span class="pln">                     </span><span class="pun">(*</span><span class="pln"> </span><span class="pun">&lt;-----</span><span class="pln"> n</span><span class="pun">.</span><span class="pln">b</span><span class="pun">.</span><span class="pln"> </span><span class="pun">*)</span><span class="pln"> </span></code></li><li class="L9"><code><span class="pln">        t2 </span><span class="pun">==&gt;</span><span class="pln"> t2</span><span class="str">' -&gt;</span></code></li><li class="L0"><code><span class="str">        P v1 t2 ==&gt; P v1 t2'</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="pln">  </span><span class="kwd">where</span><span class="pln"> </span><span class="str">" t '==&gt;' t' "</span><span class="pln"> </span><span class="pun">:=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">step t t</span><span class="str">').</span></code></li></ol></pre><p data-anchor-id="idx0">这是最新的定义</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="84gt"><ol class="linenums"><li class="L0"><code><span class="typ">The</span><span class="pln"> definition of single</span><span class="pun">-</span><span class="pln">step reduction </span><span class="kwd">for</span><span class="pln"> </span><span class="kwd">our</span><span class="pln"> toy language </span><span class="kwd">is</span><span class="pln"> fairly simple</span><span class="pun">,</span><span class="pln"> but </span><span class="kwd">for</span><span class="pln"> a larger language it would be pretty easy to forget one of the rules </span><span class="kwd">and</span><span class="pln"> create a situation </span><span class="kwd">where</span><span class="pln"> some term cannot take a step even though it has </span><span class="kwd">not</span><span class="pln"> been completely reduced to a value</span><span class="pun">.</span><span class="pln"> </span><span class="typ">The</span><span class="pln"> following theorem shows that we did </span><span class="kwd">not</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> fact</span><span class="pun">,</span><span class="pln"> make such a mistake here</span><span class="pun">.</span></code></li></ol></pre><p data-anchor-id="bymy">这是最新定义</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="t9zt"><ol class="linenums"><li class="L0"><code><span class="typ">Theorem</span><span class="pln"> strong_progress </span><span class="pun">:</span><span class="pln"> forall t</span><span class="pun">,</span></code></li><li class="L1"><code><span class="pln">  value t \/ </span><span class="pun">(</span><span class="pln">exists t</span><span class="str">', t ==&gt; t'</span><span class="pun">).</span></code></li><li class="L2"><code></code></li><li class="L3"><code><span class="typ">This</span><span class="pln"> important </span><span class="kwd">property</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> called strong progress</span><span class="pun">,</span><span class="pln"> because every term either </span><span class="kwd">is</span><span class="pln"> a value </span><span class="kwd">or</span><span class="pln"> can </span><span class="str">"make progress"</span><span class="pln"> </span><span class="kwd">by</span><span class="pln"> stepping to some other term</span><span class="pun">.</span><span class="pln"> </span></code></li></ol></pre></div>
</body>
</html>